<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class NeptuneManagerClient - RDoc Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/neptune_manager_client.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="Object.html">Object</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-compile_code">#compile_code</a>
    
    <li><a href="#method-i-does_file_exist-3F">#does_file_exist?</a>
    
    <li><a href="#method-i-get_acl">#get_acl</a>
    
    <li><a href="#method-i-get_output">#get_output</a>
    
    <li><a href="#method-i-get_supported_babel_engines">#get_supported_babel_engines</a>
    
    <li><a href="#method-i-make_call">#make_call</a>
    
    <li><a href="#method-i-put_input">#put_input</a>
    
    <li><a href="#method-i-set_acl">#set_acl</a>
    
    <li><a href="#method-i-start_neptune_job">#start_neptune_job</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./BabelHelper.html">BabelHelper</a>
  
    <li><a href="./BadConfigurationException.html">BadConfigurationException</a>
  
    <li><a href="./CommonFunctions.html">CommonFunctions</a>
  
    <li><a href="./ExodusHelper.html">ExodusHelper</a>
  
    <li><a href="./FileNotFoundException.html">FileNotFoundException</a>
  
    <li><a href="./NeptuneHelper.html">NeptuneHelper</a>
  
    <li><a href="./NeptuneManagerClient.html">NeptuneManagerClient</a>
  
    <li><a href="./NeptuneManagerException.html">NeptuneManagerException</a>
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./TaskInfo.html">TaskInfo</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class NeptuneManagerClient</h1>

  <div id="description" class="description">
    
<p>A client that uses SOAP messages to communicate with the underlying cloud
platform (here, AppScale). This client is similar to that used in the
AppScale Tools, but with non-Neptune SOAP calls removed.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="SERVER_PORT">SERVER_PORT
        
        <dd class="description"><p>The port that the Neptune Manager runs on, by default.</p>
        
      
      </dl>
    </section>
    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-conn" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">conn</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The SOAP client that we use to communicate with the NeptuneManager.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-ip" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">ip</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The IP address of the NeptuneManager that we will be connecting to.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-secret" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">secret</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The secret string that is used to authenticate this client with
NeptuneManagers. It is initially generated by appscale-run-instances and
can be found on the machine that ran that tool, or on any AppScale machine.</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-compile_code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compile_code</span><span
            class="method-args">(job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Instructs the NeptuneManager to fetch the code specified and compile it.
The result should then be placed in a location specified in the job data.</p>
          

          
          <div class="method-source-code" id="compile_code-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compile_code</span>(<span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) { 
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">compile_code</span>(<span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }  
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%rError:/</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- compile_code-source -->
          
        </div>

        

        
      </div><!-- compile_code-method -->

    
      <div id="method-i-does_file_exist-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">does_file_exist?</span><span
            class="method-args">(file, job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Asks the NeptuneManager to see if the given file exists in the remote
datastore. If extra credentials are needed for this operation, they are
searched for within the job data.</p>
          

          
          <div class="method-source-code" id="does_file_exist-3F-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">does_file_exist?</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) {
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">does_file_exist</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- does_file_exist-3F-source -->
          
        </div>

        

        
      </div><!-- does_file_exist-3F-method -->

    
      <div id="method-i-get_acl" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_acl</span><span
            class="method-args">(job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns the ACL associated with the named piece of data stored in the
underlying cloud platform. Right now, data can only be public or private,
but future versions will add individual user support. Input, output, and
exceptions mirror that of start_neptune_job.</p>
          

          
          <div class="method-source-code" id="get_acl-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_acl</span>(<span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) { 
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">get_acl</span>(<span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }  
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%rError:/</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_acl-source -->
          
        </div>

        

        
      </div><!-- get_acl-method -->

    
      <div id="method-i-get_output" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_output</span><span
            class="method-args">(job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Retrieves the output of a Neptune job, stored in an underlying database.
Within AppScale, a special application runs, referred to as the Repository,
which provides a key-value interface to Neptune job data. Data is stored as
though it were on a file system, therefore output be of the usual form
/folder/filename . Currently the contents of the file is returned as a
string to the caller, but as this may be inefficient for non-trivial output
jobs, the next version of Neptune will add an additional call to directly
copy the output to a file on the local filesystem. See <a
href="NeptuneManagerClient.html#method-i-start_neptune_job">#start_neptune_job</a>
for conditions by which this method can raise NeptuneManagerException.new
as well as the input format used for job_data.</p>
          

          
          <div class="method-source-code" id="get_output-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_output</span>(<span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) { 
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">get_output</span>(<span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }  
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%rError:/</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_output-source -->
          
        </div>

        

        
      </div><!-- get_output-method -->

    
      <div id="method-i-get_supported_babel_engines" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_supported_babel_engines</span><span
            class="method-args">(job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Asks the NeptuneManager for a list of all the Babel engines (each of which
is a queue to store jobs and something that executes tasks) that are
supported for the given credentials.</p>
          

          
          <div class="method-source-code" id="get_supported_babel_engines-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 195</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_supported_babel_engines</span>(<span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = []
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) {
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">get_supported_babel_engines</span>(<span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_supported_babel_engines-source -->
          
        </div>

        

        
      </div><!-- get_supported_babel_engines-method -->

    
      <div id="method-i-make_call" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">make_call</span><span
            class="method-args">(time, retry_on_except) { || ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A helper method to make SOAP calls for us. This method is mainly here to
reduce code duplication: all SOAP calls expect a certain timeout and can
tolerate certain exceptions, so we consolidate this code into this method.
Here, the caller specifies the timeout for the SOAP call (or NO_TIMEOUT if
an infinite timeout is required) as well as whether the call should be
retried in the face of exceptions. Exceptions can occur if the machine is
not yet running or is too busy to handle the request, so these exceptions
are automatically retried regardless of the retry value. Typically callers
set this to false to catch ‘Connection Refused’ exceptions or the like.
Finally, the caller must provide a block of code that indicates the SOAP
call to make: this is really all that differs between the calling methods.
The result of the block is returned to the caller.</p>
          

          
          <div class="method-source-code" id="make_call-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">make_call</span>(<span class="ruby-identifier">time</span>, <span class="ruby-identifier">retry_on_except</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-identifier">timeout</span>(<span class="ruby-identifier">time</span>) {
      <span class="ruby-keyword">yield</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    }
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ECONNREFUSED</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">retry_on_except</span>
      <span class="ruby-keyword">retry</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Connection was refused. Is the NeptuneManager running?&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">SSL</span><span class="ruby-operator">::</span><span class="ruby-constant">SSLError</span>, <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
    <span class="ruby-keyword">retry</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">except</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">retry_on_except</span>
      <span class="ruby-keyword">retry</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;We saw an unexpected error of the type #{except.class} with the following message:\n#{except}.&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- make_call-source -->
          
        </div>

        

        
      </div><!-- make_call-method -->

    
      <div id="method-i-put_input" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">put_input</span><span
            class="method-args">(job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Stores a file stored on the user’s local file system in the underlying
database. The user can specify to use either the underlying database that
AppScale is using, or alternative storage mechanisms (as of writing, Google
Storage, Amazon S3, and Eucalyptus Walrus are supported) via the storage
parameter.</p>
          

          
          <div class="method-source-code" id="put_input-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">put_input</span>(<span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) {
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">put_input</span>(<span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }  
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%rError:/</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- put_input-source -->
          
        </div>

        

        
      </div><!-- put_input-method -->

    
      <div id="method-i-set_acl" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_acl</span><span
            class="method-args">(job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Sets the ACL of a specified pieces of data stored in the underlying cloud
platform. As is the case with <a
href="NeptuneManagerClient.html#method-i-get_acl">#get_acl</a>, ACLs can be
either public or private right now, but this will be expanded upon in the
future. As with the other SOAP calls, input, output, and exceptions mirror
that of start_neptune_job.</p>
          

          
          <div class="method-source-code" id="set_acl-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_acl</span>(<span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) { 
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">set_acl</span>(<span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }  
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%rError:/</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- set_acl-source -->
          
        </div>

        

        
      </div><!-- set_acl-method -->

    
      <div id="method-i-start_neptune_job" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">start_neptune_job</span><span
            class="method-args">(job_data)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Initiates the start of a Neptune job, whether it be a HPC job (MPI, X10, or
MapReduce), or a scaling job (e.g., for AppScale itself). This method
should not be used for retrieving the output of a job or getting / setting
output ACLs, but just for starting new HPC / scaling jobs. This method
takes a hash containing the parameters of the job to run, and can raise
NeptuneManagerException.new if the NeptuneManager it calls returns an error
(e.g., if a bad secret is used or the machine isn’t running). Otherwise,
the return value of this method is the result returned from the
NeptuneManager.</p>
          

          
          <div class="method-source-code" id="start_neptune_job-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start_neptune_job</span>(<span class="ruby-identifier">job_data</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">make_call</span>(<span class="ruby-constant">NO_TIMEOUT</span>, <span class="ruby-keyword">false</span>) { 
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">start_job</span>(<span class="ruby-identifier">job_data</span>, <span class="ruby-ivar">@secret</span>)
  }  
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NeptuneManagerException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%rError:/</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- start_neptune_job-source -->
          
        </div>

        

        
      </div><!-- start_neptune_job-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(ip, secret)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A constructor that requires both the IP address of the machine to
communicate with as well as the secret (string) needed to perform
communication. NeptuneManagers will reject SOAP calls if this secret
(basically a password) is not present - it can be found in the user’s
.appscale directory, and a helper method is usually present to fetch this
for us.</p>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/neptune_manager_client.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">ip</span>, <span class="ruby-identifier">secret</span>)
  <span class="ruby-ivar">@ip</span> = <span class="ruby-identifier">ip</span>
  <span class="ruby-ivar">@secret</span> = <span class="ruby-identifier">secret</span>
  
  <span class="ruby-ivar">@conn</span> = <span class="ruby-constant">SOAP</span><span class="ruby-operator">::</span><span class="ruby-constant">RPC</span><span class="ruby-operator">::</span><span class="ruby-constant">Driver</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;https://#{@ip}:#{SERVER_PORT}&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;start_job&quot;</span>, <span class="ruby-string">&quot;jobs&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;put_input&quot;</span>, <span class="ruby-string">&quot;job_data&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;get_output&quot;</span>, <span class="ruby-string">&quot;job_data&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;get_acl&quot;</span>, <span class="ruby-string">&quot;job_data&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;set_acl&quot;</span>, <span class="ruby-string">&quot;job_data&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;compile_code&quot;</span>, <span class="ruby-string">&quot;job_data&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;get_supported_babel_engines&quot;</span>, <span class="ruby-string">&quot;job_data&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
  <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">add_method</span>(<span class="ruby-string">&quot;does_file_exist&quot;</span>, <span class="ruby-string">&quot;file&quot;</span>, <span class="ruby-string">&quot;job_data&quot;</span>, <span class="ruby-string">&quot;secret&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

